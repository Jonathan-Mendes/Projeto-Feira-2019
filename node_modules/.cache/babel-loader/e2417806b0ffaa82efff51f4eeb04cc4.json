{"ast":null,"code":"var _jsxFileName = \"/home/jonathan/\\xC1rea de Trabalho/Super-Events/src/components/Dashboard/index.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport firebase from '../../firebase';\nimport './dashboard.css';\nimport { IoIosLogOut, IoIosAdd } from 'react-icons/io';\nimport { Button, Col, Row, Container } from 'reactstrap';\nimport { FaRegClock, FaRegCalendarAlt, FaMapMarkerAlt, FaRegEdit, FaRegTrashAlt, FaStar } from \"react-icons/fa\";\nimport { async } from 'q';\nimport { confirmAlert } from 'react-confirm-alert';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.logout = async () => {\n      await firebase.logout().catch(error => {\n        console.log(error);\n      });\n      localStorage.removeItem(\"nome\");\n      this.props.history.push('/');\n    };\n\n    this.confirmDeleteEvent = async key => {\n      try {\n        await firebase.deleteEventByKey(key);\n        window.location.reload();\n      } catch (error) {\n        alert(error.message);\n      }\n    };\n\n    this.deleteEvent = key => {\n      confirmAlert({\n        title: 'Excluir Evento',\n        message: 'Deseja realmente excluir o evento?',\n        buttons: [{\n          label: 'Sim',\n          onClick: () => this.confirmDeleteEvent(key)\n        }, {\n          label: 'NÃ£o'\n        }]\n      });\n    };\n\n    this.destacarEvent = async key => {\n      try {\n        await firebase.destaqueEventByKey(key);\n        alert(\"Seu evento foi colocado como destaque\");\n      } catch (error) {\n        alert(error.message);\n      }\n    };\n\n    this.state = {\n      nome: localStorage.nome,\n      uid: firebase.getCurrentUid(),\n      events: [],\n      ativo: '',\n      var: []\n    };\n    this.logout = this.logout.bind(this);\n    this.formatDate = this.formatDate.bind(this);\n    this.deleteEvent = this.deleteEvent.bind(this);\n    this.destacarEvent = this.destacarEvent.bind(this);\n    this.confirmDeleteEvent = this.confirmDeleteEvent.bind(this);\n  }\n\n  async componentDidMount() {\n    if (!firebase.getCurrent()) {\n      this.props.history.replace('/login');\n      return null;\n    }\n\n    firebase.getUserName(info => {\n      localStorage.nome = info.val().nome;\n      this.setState({\n        nome: localStorage.nome\n      });\n    });\n    firebase.app.ref('events').orderByChild(\"uid\").equalTo(this.state.uid).on('value', snapshot => {\n      let state = this.state;\n      state.events = [];\n      snapshot.forEach(childItem => {\n        state.events.push({\n          key: childItem.key,\n          titulo: childItem.val().titulo,\n          imagem: childItem.val().imagem,\n          descricao: childItem.val().descricao,\n          data: childItem.val().data,\n          hora: childItem.val().hora,\n          cidade: childItem.val().cidade,\n          local: childItem.val().local,\n          autor: childItem.val().autor,\n          ativo: childItem.val().ativo\n        });\n      });\n      this.setState(state);\n    });\n  }\n\n  formatDate(data) {\n    let today = data;\n    var brDate = today.slice(8, 10) + '/' + today.slice(5, 7);\n    return brDate;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"dashboard\",\n      className: \"px-3 my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"user-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Ol\\xE1, \", this.state.nome)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Logado com \", firebase.getCurrent()), React.createElement(\"div\", {\n      id: \"tip\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Meus Eventos\"))), React.createElement(Container, {\n      id: \"post\",\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, this.state.events.map(post => {\n      return React.createElement(Col, {\n        xs: \"12\",\n        sm: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"link\",\n        key: post.key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/event/\".concat(post.key),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"article\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, post.titulo))), React.createElement(\"img\", {\n        src: post.imagem,\n        alt: \"Capa do post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"footer\", {\n        id: \"dados\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mx-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(FaRegCalendarAlt, {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), this.formatDate(post.data))), React.createElement(Col, {\n        xs: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mx-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(FaRegClock, {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })), post.hora))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"12\",\n        className: \"ml-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"mx-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(FaMapMarkerAlt, {\n        className: \"icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), post.cidade)))))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/editevent/\".concat(post.key),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"btnEdit\",\n        color: \"success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(FaRegEdit, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })))), React.createElement(Col, {\n        xs: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"btnDelete\",\n        color: \"warning\",\n        onClick: () => this.destacarEvent(post.key),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(FaStar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }))), React.createElement(Col, {\n        xs: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"btnDelete\",\n        color: \"danger\",\n        onClick: () => this.deleteEvent(post.key),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(FaRegTrashAlt, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }))))));\n    }))))));\n  }\n\n}\n\nexport default withRouter(Dashboard);","map":{"version":3,"sources":["/home/jonathan/Ãrea de Trabalho/Super-Events/src/components/Dashboard/index.js"],"names":["React","Component","Link","withRouter","firebase","IoIosLogOut","IoIosAdd","Button","Col","Row","Container","FaRegClock","FaRegCalendarAlt","FaMapMarkerAlt","FaRegEdit","FaRegTrashAlt","FaStar","async","confirmAlert","Dashboard","constructor","props","logout","catch","error","console","log","localStorage","removeItem","history","push","confirmDeleteEvent","key","deleteEventByKey","window","location","reload","alert","message","deleteEvent","title","buttons","label","onClick","destacarEvent","destaqueEventByKey","state","nome","uid","getCurrentUid","events","ativo","var","bind","formatDate","componentDidMount","getCurrent","replace","getUserName","info","val","setState","app","ref","orderByChild","equalTo","on","snapshot","forEach","childItem","titulo","imagem","descricao","data","hora","cidade","local","autor","today","brDate","slice","render","map","post"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport firebase from '../../firebase';\r\nimport './dashboard.css';\r\nimport { IoIosLogOut, IoIosAdd } from 'react-icons/io';\r\nimport { Button, Col, Row, Container } from 'reactstrap';\r\nimport { FaRegClock, FaRegCalendarAlt, FaMapMarkerAlt, FaRegEdit, FaRegTrashAlt, FaStar } from \"react-icons/fa\";\r\nimport { async } from 'q';\r\nimport { confirmAlert } from 'react-confirm-alert';\r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\n\r\nclass Dashboard extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            nome: localStorage.nome,\r\n            uid: firebase.getCurrentUid(),\r\n            events: [],\r\n            ativo: '',\r\n            var: []\r\n        };\r\n        this.logout = this.logout.bind(this);\r\n        this.formatDate = this.formatDate.bind(this);\r\n        this.deleteEvent = this.deleteEvent.bind(this);\r\n        this.destacarEvent = this.destacarEvent.bind(this);\r\n        this.confirmDeleteEvent = this.confirmDeleteEvent.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        if (!firebase.getCurrent()) {\r\n            this.props.history.replace('/login');\r\n            return null;\r\n        }\r\n\r\n        firebase.getUserName((info) => {\r\n            localStorage.nome = info.val().nome\r\n            this.setState({ nome: localStorage.nome })\r\n        })\r\n\r\n        firebase.app.ref('events').orderByChild(\"uid\").equalTo(this.state.uid).on('value', (snapshot) => {\r\n            let state = this.state;\r\n            state.events = [];\r\n\r\n            snapshot.forEach((childItem) => {\r\n                state.events.push({\r\n                    key: childItem.key,\r\n                    titulo: childItem.val().titulo,\r\n                    imagem: childItem.val().imagem,\r\n                    descricao: childItem.val().descricao,\r\n                    data: childItem.val().data,\r\n                    hora: childItem.val().hora,\r\n                    cidade: childItem.val().cidade,\r\n                    local: childItem.val().local,\r\n                    autor: childItem.val().autor,\r\n                    ativo: childItem.val().ativo\r\n                })\r\n            })\r\n            this.setState(state);\r\n        })\r\n    }\r\n\r\n    logout = async () => {\r\n        await firebase.logout()\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n        localStorage.removeItem(\"nome\");\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    formatDate(data) {\r\n        let today = data;\r\n\r\n        var brDate = today.slice(8, 10) + '/' +\r\n            today.slice(5, 7);\r\n\r\n        return brDate;\r\n    }\r\n\r\n    confirmDeleteEvent = async (key) => {\r\n        try {\r\n            await firebase.deleteEventByKey(key);\r\n            window.location.reload();\r\n\r\n        } catch (error) {\r\n            alert(error.message);\r\n        }\r\n    }\r\n\r\n    deleteEvent = (key) => {\r\n        confirmAlert({\r\n          title: 'Excluir Evento',\r\n          message: 'Deseja realmente excluir o evento?',\r\n          buttons: [\r\n            {\r\n              label: 'Sim',\r\n              onClick: () => this.confirmDeleteEvent(key)\r\n            },\r\n            {\r\n              label: 'NÃ£o',\r\n            }\r\n          ]\r\n        });\r\n      };\r\n\r\n    destacarEvent = async (key) => {\r\n        try{\r\n            await firebase.destaqueEventByKey(key);\r\n            alert(\"Seu evento foi colocado como destaque\")\r\n        } catch (error) {\r\n            alert(error.message);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"dashboard\" className=\"px-3 my-3\">\r\n                <Container>\r\n                    <div className=\"user-info\">\r\n                        <h5>OlÃ¡, {this.state.nome}</h5>\r\n                    </div>\r\n                    <p>Logado com {firebase.getCurrent()}</p>\r\n\r\n                    <div id=\"tip\">\r\n                        <Row>\r\n                            <Col xs='12'>\r\n                                <h5 id=\"title\">Meus Eventos</h5>\r\n                            </Col>\r\n                        </Row>\r\n                        <Container id=\"post\" class=\"container\">\r\n                            <Row>\r\n                                {this.state.events.map((post) => {\r\n                                    return (\r\n                                        <Col xs='12' sm='4'>\r\n                                            <div id=\"link\" key={post.key}>\r\n                                                <Link to={`/event/${post.key}`}>\r\n                                                    <article>\r\n                                                        <header>\r\n                                                            <div className=\"title\">\r\n                                                                <strong>{post.titulo}</strong>\r\n                                                            </div>\r\n                                                        </header>\r\n                                                        <img src={post.imagem} alt=\"Capa do post\" />\r\n                                                        <footer id=\"dados\">\r\n                                                            <Row className='text-center'>\r\n                                                                <Col xs='6'>\r\n                                                                    <p><span className='mx-2'><FaRegCalendarAlt className='icon' /></span>{this.formatDate(post.data)}</p>\r\n                                                                </Col>\r\n\r\n                                                                <Col xs='6'>\r\n                                                                    <p><span className='mx-2'><FaRegClock className='icon' /></span>{post.hora}</p>\r\n\r\n                                                                </Col>\r\n                                                            </Row>\r\n                                                            <Row >\r\n                                                                <Col xs='12' className='ml-3'>\r\n                                                                    <p>\r\n                                                                        <span className='mx-2'><FaMapMarkerAlt className='icon' /></span>\r\n                                                                        {post.cidade}\r\n                                                                    </p>\r\n                                                                </Col>\r\n                                                            </Row>\r\n                                                        </footer>\r\n                                                    </article>\r\n\r\n                                                </Link>\r\n                                                <Row>\r\n                                                    <Col xs='4'>\r\n                                                        <Link to={`/editevent/${post.key}`}>\r\n                                                            <Button id=\"btnEdit\" color=\"success\">\r\n                                                                <FaRegEdit />\r\n                                                            </Button>\r\n                                                        </Link>\r\n                                                    </Col>\r\n                                                    <Col xs='4'>\r\n                                                        <Button id=\"btnDelete\" color=\"warning\"\r\n                                                            onClick={() => this.destacarEvent(post.key)}>\r\n                                                            <FaStar />\r\n                                                        </Button>\r\n                                                    </Col>\r\n                                                    <Col xs='4'>\r\n                                                        <Button id=\"btnDelete\" color=\"danger\"\r\n                                                            onClick={() => this.deleteEvent(post.key)}>\r\n                                                            <FaRegTrashAlt />\r\n                                                        </Button>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </div>\r\n                                        </Col>\r\n                                    );\r\n                                })}\r\n                            </Row>\r\n                        </Container>\r\n                    </div>\r\n\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Dashboard);"]},"metadata":{},"sourceType":"module"}